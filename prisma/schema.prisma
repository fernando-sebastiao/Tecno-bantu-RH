// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Carreira {
  id            Int           @id @default(autoincrement())
  nome_carreira String        @unique @map("nome")
  regime        Regime
  subcarreira   SubCarreira[]
  cateroria     CategoriaRH[]
  createdAt     DateTime      @default(now()) @map("created_at")
  updatedAt     DateTime      @updatedAt @map("updated_at")

  @@map("carreira")
}

model SubCarreira {
  id               Int           @id @default(autoincrement())
  nome_SubCarreira String        @map("nome")
  Id_carreira      Int?          @map("carreiraId")
  Carreira         Carreira?     @relation(fields: [Id_carreira], references: [id], onDelete: Cascade)
  categoria        CategoriaRH[]
  createdAt        DateTime      @default(now()) @map("created_at")
  updatedAt        DateTime      @updatedAt @map("updated_at")

  @@map("subcarreira")
}

model CategoriaRH {
  id             Int           @id @default(autoincrement())
  nome_categoria String        @map("nome")
  Carreira       Carreira?     @relation(fields: [Id_carreira], references: [id], onDelete: Cascade)
  salario_base   Float
  Id_carreira    Int?          @map("carreiraId")
  SubCarreira    SubCarreira?  @relation(fields: [Id_subCarreira], references: [id], onDelete: Cascade)
  Id_subCarreira Int?          @map("subCarreiraId")
  funcionario    Funcionario[]
  createdAt      DateTime      @default(now()) @map("created_at")
  updatedAt      DateTime      @updatedAt @map("updated_at")

  @@map("categoria")
}

model Funcao {
  id          Int           @id @default(autoincrement())
  nome_funcao String        @map("nome")
  funcionario Funcionario[]
  createdAt   DateTime      @default(now()) @map("created_at")
  updatedAt   DateTime      @updatedAt @map("updated_at")

  @@map("funcao")
}

model Banco {
  id          Int           @id @default(autoincrement())
  nome_banco  String        @map("nome")
  codigo      String
  sigla       String
  funcionario Funcionario[]
  createdAt   DateTime      @default(now()) @map("created_at")
  updatedAt   DateTime      @updatedAt @map("updated_at")

  @@map("banco")
}

model Funcionario {
  id                          Int                       @id @default(autoincrement())
  nome_completo               String                    @map("nomeCompleto")
  nome_pai                    String                    @map("nomePai")
  nome_mae                    String                    @map("nomeMae")
  nascimento                  DateTime
  email                       String                    @unique
  genero                      Genero
  pais                        String
  tipo_identificacao          Identificacao
  num_identificacao           String
  nivel_academico             NIVEL_ACADEMICO
  avatar                      String?
  telefone1                   String                    @unique
  telefone2                   String?                   @unique
  linkedin                    String?
  whatsApp                    String?
  instagram                   String?
  bairro                      String
  rua                         String
  Funcao                      Funcao?                   @relation(fields: [id_funcao], references: [id], onDelete: Cascade)
  id_funcao                   Int?                      @map("funcaoId")
  Categoria                   CategoriaRH?              @relation(fields: [id_categoria], references: [id], onDelete: Cascade)
  id_categoria                Int?                      @map("categoriaId")
  num_conta                   String?                   @unique @map("numeroConta")
  iban                        String?                   @unique
  Id_banco                    Int?                      @map("bancoId")
  createdAt                   DateTime                  @default(now()) @map("created_at")
  updatedAt                   DateTime                  @updatedAt @map("updated_at")
  dadosprofissionais          DadosProfissionais[]
  formacoes                   Formacoes[]
  esperiencialaboral          ExperiencialLaboral[]
  departamentosComoChefe      Departamento[]            @relation("FuncionarioChefe")
  departamentosComoSupervisor Departamento[]            @relation("FuncionarioSupervisor")
  funcionariodepartamento     FuncionarioDepartamento[]
  Banco                       Banco?                    @relation(fields: [Id_banco], references: [id], onDelete: Cascade)

  @@map("funcionario")
}

model DadosProfissionais {
  id              Int      @id @default(autoincrement())
  data_admissao   DateTime
  numero_despacho String?  @map("numeroDespacho")
  data_despacho   DateTime
  contrato        Contrato

  Funcionario    Funcionario? @relation(fields: [Id_funcionario], references: [id], onDelete: Cascade)
  Id_funcionario Int?         @map("funcionarioId")
  createdAt      DateTime     @default(now()) @map("created_at")
  updatedAt      DateTime     @updatedAt @map("updated_at")

  @@map("DadosProfissionais")
}

model Formacoes {
  id             Int          @id @default(autoincrement())
  ano_inicio     DateTime
  ano_termino    DateTime
  formacao       String
  pais           String
  instituicao    String
  Funcionario    Funcionario? @relation(fields: [Id_funcionario], references: [id], onDelete: Cascade)
  Id_funcionario Int?         @map("funcionarioId")
  createdAt      DateTime     @default(now()) @map("created_at")
  updatedAt      DateTime     @updatedAt @map("updated_at")

  @@map("formacoes")
}

model Publicacoes {
  id        Int      @id @default(autoincrement())
  titulo    String
  entidade  String
  ano       DateTime
  tipo      Tipo
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("publicacoes")
}

model ExperiencialLaboral {
  id             Int          @id @default(autoincrement())
  ano_inicio     DateTime
  ano_termino    DateTime
  funcao         String
  instituicao    String
  pais           String?
  createdAt      DateTime     @default(now()) @map("created_at")
  updatedAt      DateTime     @updatedAt @map("updated_at")
  Funcionario    Funcionario? @relation(fields: [Id_funcionario], references: [id], onDelete: Cascade)
  Id_funcionario Int?         @map("funcionarioId")
}

model Departamento {
  id                        Int          @id @default(autoincrement())
  nome_departamento         String       @map("nome")
  Id_funcionario_chefe      Int?
  Id_funcionario_supervisor Int?
  createdAt                 DateTime     @default(now()) @map("created_at")
  updatedAt                 DateTime     @updatedAt @map("updated_at")
  funcionario_chefe         Funcionario? @relation("FuncionarioChefe", fields: [Id_funcionario_chefe], references: [id], onDelete: Cascade)
  funcionario_supervisor    Funcionario? @relation("FuncionarioSupervisor", fields: [Id_funcionario_supervisor], references: [id], onDelete: Cascade)

  funcionariodepartamento FuncionarioDepartamento[]
}

model FuncionarioDepartamento {
  id              Int           @id @default(autoincrement())
  Departamento    Departamento? @relation(fields: [Id_departamento], references: [id], onDelete: Cascade)
  Id_departamento Int?          @map("departamentoId")
  Funcionario     Funcionario?  @relation(fields: [Id_funcionario], references: [id], onDelete: Cascade)
  Id_funcionario  Int?          @map("funcionarioId")
  createdAt       DateTime      @default(now()) @map("created_at")
  updatedAt       DateTime      @updatedAt @map("updated_at")
}

//All Enum

enum Tipo {
  livro
  cientifico
  outro
}

enum Contrato {
  CTD
  CAP
}

enum NIVEL_ACADEMICO {
  Base
  Medio
  Universitario
  Licenciado
  Mestrado
  Doctoramento
}

enum Identificacao {
  BI
  Passaporte
  Residente
  Outro
}

enum Regime {
  geral
  especial
}

enum Genero {
  masculino
  femenino
}
